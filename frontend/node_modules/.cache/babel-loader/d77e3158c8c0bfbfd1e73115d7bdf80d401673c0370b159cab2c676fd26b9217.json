{"ast":null,"code":"import'./Item.css';import{useEffect,useState}from\"react\";import{toast}from\"react-toastify\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Item=_ref=>{let{productId,brand,productName,imageUrl,description,price,photos}=_ref;const[showFullDescription,setShowFullDescription]=useState(false);const[currentImageIndex,setCurrentImageIndex]=useState(0);const[isAddingToCart,setIsAddingToCart]=useState(false);const[saveToWishlist,setSaveToWishlist]=useState(false);const displayImages=photos&&photos.length>0?photos:imageUrl;const imagePath=displayImages.length>0?displayImages[currentImageIndex]:null;const handleMouseEnter=()=>{const interval=setInterval(()=>{setCurrentImageIndex(prevIndex=>prevIndex<displayImages.length-1?prevIndex+1:0);},1000);setTimeout(()=>{clearInterval(interval);},3000);};const handleMouseLeave=()=>{setCurrentImageIndex(0);};function toggleDescription(){setShowFullDescription(!showFullDescription);}function handleAddToCart(){if(isAddingToCart)return;setIsAddingToCart(true);const data={productId:productId,quantity:1};const authToken=localStorage.getItem('token');fetch('http://localhost:8080/nexusHub/cart-item/add',{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"\".concat(authToken)},body:JSON.stringify(data)}).then(response=>{if(response.ok){const addToCart=window.confirm(\"Do you want to add this item to your cart?\");if(addToCart){setIsAddingToCart(true);}}else{throw new Error('Failed to add item to cart');}}).then(()=>{toast.success('Item added to cart successfully',{position:\"top-center\",draggable:true,hideProgressBar:true});}).catch(error=>{console.error('Error adding item to cart:',error);toast.error('Please login first to add item to your Cart',{position:\"top-center\",draggable:true,hideProgressBar:true});}).finally(()=>{setIsAddingToCart(false);});}function handleSaveToWishlist(){const wishlistItems=JSON.parse(localStorage.getItem('wishlist')||'[]');if(saveToWishlist){const index=wishlistItems.indexOf(productId);if(index!==-1){wishlistItems.splice(index,1);}const removeFromWishList=window.confirm(\"Do you want to remove this item from your wishlist?\");if(removeFromWishList){localStorage.setItem('wishlist',JSON.stringify(wishlistItems));setSaveToWishlist(false);}}else{const addToWishList=window.confirm(\"Do you want to add this item to your wishlist?\");if(addToWishList){wishlistItems.push(productId);localStorage.setItem('wishlist',JSON.stringify(wishlistItems));setSaveToWishlist(true);}}}useEffect(()=>{const savedWishlist=JSON.parse(localStorage.getItem('wishlist')||'[]');if(savedWishlist.includes(productId)){setSaveToWishlist(true);}},[productId]);return/*#__PURE__*/_jsx(\"div\",{className:\"card-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[displayImages&&/*#__PURE__*/_jsx(\"img\",{src:imagePath,className:\"card-img-top card-images\",alt:productName,onMouseEnter:handleMouseEnter,onMouseLeave:handleMouseLeave}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body desc\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"brand-txt\",children:brand}),/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:productName}),/*#__PURE__*/_jsxs(\"p\",{className:\"product-desc\",children:[showFullDescription?description:description.slice(0,100),description.length>100&&/*#__PURE__*/_jsx(\"span\",{className:\"toggle-description\",onClick:toggleDescription,children:showFullDescription?'...less':'...more'})]}),/*#__PURE__*/_jsxs(\"h4\",{className:\"price-txt\",children:[\"$\",price.toFixed(2)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-to-cart-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"add-to-wishlist\",onClick:handleSaveToWishlist,children:/*#__PURE__*/_jsx(\"i\",{className:\"bi \".concat(saveToWishlist?'bi-heart-fill':'bi-heart',\" heart-icon\"),id:productId})}),/*#__PURE__*/_jsx(\"button\",{className:\"add-to-cart\",onClick:handleAddToCart,children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-cart3 cart-icon\",id:productId})})]})]})]})});};export default Item;","map":{"version":3,"names":["useEffect","useState","toast","jsx","_jsx","jsxs","_jsxs","Item","_ref","productId","brand","productName","imageUrl","description","price","photos","showFullDescription","setShowFullDescription","currentImageIndex","setCurrentImageIndex","isAddingToCart","setIsAddingToCart","saveToWishlist","setSaveToWishlist","displayImages","length","imagePath","handleMouseEnter","interval","setInterval","prevIndex","setTimeout","clearInterval","handleMouseLeave","toggleDescription","handleAddToCart","data","quantity","authToken","localStorage","getItem","fetch","method","headers","concat","body","JSON","stringify","then","response","ok","addToCart","window","confirm","Error","success","position","draggable","hideProgressBar","catch","error","console","finally","handleSaveToWishlist","wishlistItems","parse","index","indexOf","splice","removeFromWishList","setItem","addToWishList","push","savedWishlist","includes","className","children","src","alt","onMouseEnter","onMouseLeave","slice","onClick","toFixed","id"],"sources":["C:/Users/Chanmin/chatbot_project/chatbot/frontend/src/Components/CategoryPages/Item.js"],"sourcesContent":["import './Item.css';\r\nimport {useEffect, useState} from \"react\";\r\nimport {toast} from \"react-toastify\";\r\n\r\n\r\nconst Item = ({ productId, brand, productName, imageUrl, description, price, photos }) => {\r\n    const [showFullDescription, setShowFullDescription] = useState(false);\r\n    const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n    const [isAddingToCart, setIsAddingToCart] = useState(false);\r\n    const [saveToWishlist, setSaveToWishlist] = useState(false);\r\n\r\n    const displayImages = photos && photos.length > 0 ? photos : imageUrl;\r\n    const imagePath = displayImages.length > 0 ? displayImages[currentImageIndex] : null;\r\n\r\n    const handleMouseEnter = () => {\r\n        const interval = setInterval(() => {\r\n            setCurrentImageIndex(prevIndex =>\r\n                prevIndex < displayImages.length - 1 ? prevIndex + 1 : 0\r\n            );\r\n        }, 1000);\r\n\r\n        setTimeout(() => {\r\n            clearInterval(interval);\r\n        }, 3000);\r\n    };\r\n\r\n    const handleMouseLeave = () => {\r\n        setCurrentImageIndex(0);\r\n    };\r\n\r\n    function toggleDescription() {\r\n        setShowFullDescription(!showFullDescription);\r\n    }\r\n\r\n    function handleAddToCart() {\r\n        if (isAddingToCart) return;\r\n\r\n        setIsAddingToCart(true);\r\n\r\n        const data = {\r\n            productId: productId,\r\n            quantity: 1\r\n        };\r\n\r\n        const authToken = localStorage.getItem('token');\r\n\r\n        fetch('http://localhost:8080/nexusHub/cart-item/add', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `${authToken}`\r\n            },\r\n            body: JSON.stringify(data)\r\n        })\r\n            .then(response => {\r\n                if (response.ok) {\r\n                    const addToCart = window.confirm(\"Do you want to add this item to your cart?\")\r\n                    if (addToCart) {\r\n                        setIsAddingToCart(true);\r\n                    }\r\n                } else {\r\n                    throw new Error('Failed to add item to cart');\r\n                }\r\n            })\r\n            .then(() => {\r\n                toast.success('Item added to cart successfully', {\r\n                    position: \"top-center\",\r\n                    draggable: true,\r\n                    hideProgressBar: true\r\n                });\r\n            })\r\n            .catch(error => {\r\n                console.error('Error adding item to cart:', error);\r\n                toast.error('Please login first to add item to your Cart', {\r\n                    position: \"top-center\",\r\n                    draggable: true,\r\n                    hideProgressBar: true\r\n                });\r\n            })\r\n            .finally(() => {\r\n                setIsAddingToCart(false);\r\n            })\r\n    }\r\n\r\n    function handleSaveToWishlist() {\r\n        const wishlistItems = JSON.parse(localStorage.getItem('wishlist') || '[]');\r\n\r\n        if (saveToWishlist) {\r\n            const index = wishlistItems.indexOf(productId);\r\n            if (index !== -1) {\r\n                wishlistItems.splice(index, 1);\r\n            }\r\n\r\n            const removeFromWishList = window.confirm(\"Do you want to remove this item from your wishlist?\");\r\n            if (removeFromWishList) {\r\n                localStorage.setItem('wishlist', JSON.stringify(wishlistItems));\r\n                setSaveToWishlist(false);\r\n            }\r\n        } else {\r\n            const addToWishList = window.confirm(\"Do you want to add this item to your wishlist?\");\r\n            if (addToWishList) {\r\n                wishlistItems.push(productId);\r\n                localStorage.setItem('wishlist', JSON.stringify(wishlistItems));\r\n                setSaveToWishlist(true);\r\n            }\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        const savedWishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');\r\n        if (savedWishlist.includes(productId)) {\r\n            setSaveToWishlist(true);\r\n        }\r\n    }, [productId]);\r\n\r\n\r\n    return (\r\n        <div className=\"card-container\">\r\n            <div className=\"card\">\r\n                {displayImages && (\r\n                    <img\r\n                        src={imagePath}\r\n                        className=\"card-img-top card-images\"\r\n                        alt={productName}\r\n                        onMouseEnter={handleMouseEnter}\r\n                        onMouseLeave={handleMouseLeave}\r\n                    />\r\n                )}\r\n                <div className=\"card-body desc\">\r\n                    <p className=\"brand-txt\">{brand}</p>\r\n                    <h5 className=\"card-title\">{productName}</h5>\r\n                    <p className=\"product-desc\">\r\n                        {showFullDescription ? description : description.slice(0, 100)}\r\n                        {description.length > 100 && (\r\n                          <span className=\"toggle-description\" onClick={toggleDescription}>\r\n                              {showFullDescription ? '...less' : '...more'}</span>\r\n                        )}\r\n                    </p>\r\n                    <h4 className=\"price-txt\">${price.toFixed(2)}</h4>\r\n                    <div className=\"add-to-cart-container\">\r\n                        <button\r\n                            className=\"add-to-wishlist\"\r\n                            onClick={handleSaveToWishlist}>\r\n                            <i className={`bi ${saveToWishlist ? 'bi-heart-fill' : 'bi-heart'} heart-icon`} id={productId}></i>\r\n                        </button>\r\n                        <button\r\n                            className=\"add-to-cart\"\r\n                            onClick={handleAddToCart}>\r\n                            <i className=\"bi bi-cart3 cart-icon\" id={productId}></i>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Item;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}