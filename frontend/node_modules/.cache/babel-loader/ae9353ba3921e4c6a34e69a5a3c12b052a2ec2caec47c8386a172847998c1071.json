{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import Header from\"../Header\";import\"./ShoppingCart.css\";import CartItem from\"./CartItem\";import{useNavigate}from\"react-router-dom\";import{toast}from\"react-toastify\";import Cart from'../../Assets/shopping-cart.png';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ShoppingCart(){const[cartItems,setCartItems]=useState([]);const[isLoading,setIsLoading]=useState(true);const[cartId,setCartId]=useState(null);const[subTotal,setSubTotal]=useState(0);const navigate=useNavigate();useEffect(()=>{const userId=localStorage.getItem('userId');if(!userId){handleLoginRedirect();return;}fetchCartItems(userId);},[]);const fetchCartItems=async userId=>{if(userId){try{const response=await fetch(\"http://localhost:8080/nexusHub/cart/\".concat(userId));if(response.ok){const data=await response.json();setCartItems(data.cartItemList);setCartId(data.cartId);setIsLoading(false);}else if(response.status===404){handleLoginRedirect();}else{console.error(\"Error fetching cart items:\",response.statusText);setIsLoading(false);}}catch(error){console.error(\"Error fetching cart items:\",error);setIsLoading(false);}}};function handleLoginRedirect(){window.alert(\"Please Login First\");navigate(\"/main\");}const handleDeleteItem=deletedItemId=>{toast.success(\"Item deleted from your cart\",{position:\"top-center\",draggable:true,hideProgressBar:true});setCartItems(prevCartItems=>prevCartItems.filter(item=>item.cartItemId!==deletedItemId));};const handleQuantityChange=(cartItemId,newQuantity)=>{setCartItems(prevCartItems=>prevCartItems.map(item=>item.cartItemId===cartItemId?{...item,quantity:newQuantity}:item));};useEffect(()=>{const newSubTotal=cartItems.reduce((total,cartItem)=>total+cartItem.price*cartItem.quantity,0);setSubTotal(newSubTotal);},[cartItems]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container col-7\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-title-container\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"cart-title\",children:\"Your Items\"})}),/*#__PURE__*/_jsx(\"ul\",{className:\"product-list\",children:/*#__PURE__*/_jsx(\"li\",{className:\"product\",children:/*#__PURE__*/_jsx(\"div\",{className:\"shopping-card\",children:isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})}):cartItems.length===0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"There are no items in your cart.\"}),/*#__PURE__*/_jsx(\"img\",{src:Cart,alt:\"shopping cart\",className:\"shopping-cart-icon\"})]}):cartItems&&cartItems.map((cartItem,index)=>/*#__PURE__*/_jsx(CartItem,{cartId:cartId,cartItemId:cartItem.cartItemId,images:cartItem.images,productName:cartItem.productName,brand:cartItem.brand,price:cartItem.price,photos:cartItem.photos,quantity:cartItem.quantity,onDelete:handleDeleteItem,onQuantityChange:handleQuantityChange},index))})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"total-container col-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"price-container\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"total-txt\",children:\"Subtotal:\"}),/*#__PURE__*/_jsxs(\"h4\",{className:\"total-amount\",children:[\"$\",subTotal.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"proceed-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary proceed-btn\",children:\"Proceed to Checkout\"})})]})]})]});}","map":{"version":3,"names":["React","useEffect","useState","Header","CartItem","useNavigate","toast","Cart","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ShoppingCart","cartItems","setCartItems","isLoading","setIsLoading","cartId","setCartId","subTotal","setSubTotal","navigate","userId","localStorage","getItem","handleLoginRedirect","fetchCartItems","response","fetch","concat","ok","data","json","cartItemList","status","console","error","statusText","window","alert","handleDeleteItem","deletedItemId","success","position","draggable","hideProgressBar","prevCartItems","filter","item","cartItemId","handleQuantityChange","newQuantity","map","quantity","newSubTotal","reduce","total","cartItem","price","children","className","role","length","src","alt","index","images","productName","brand","photos","onDelete","onQuantityChange","toFixed"],"sources":["C:/Users/Chanmin/chatbot_project/chatbot/frontend/src/Components/CartPage/ShoppingCart.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport Header from \"../Header\";\r\nimport \"./ShoppingCart.css\";\r\nimport CartItem from \"./CartItem\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport {toast} from \"react-toastify\";\r\nimport Cart from '../../Assets/shopping-cart.png';\r\n\r\nexport default function ShoppingCart() {\r\n    const [cartItems, setCartItems] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [cartId, setCartId] = useState(null);\r\n    const [subTotal, setSubTotal] = useState(0);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        const userId = localStorage.getItem('userId');\r\n        if (!userId) {\r\n            handleLoginRedirect();\r\n            return;\r\n        }\r\n\r\n        fetchCartItems(userId);\r\n    },[]);\r\n\r\n    const fetchCartItems = async (userId) => {\r\n\r\n        if (userId) {\r\n            try {\r\n                const response = await fetch(`http://localhost:8080/nexusHub/cart/${userId}`);\r\n                if (response.ok) {\r\n                    const data = await response.json();\r\n                    setCartItems(data.cartItemList);\r\n                    setCartId(data.cartId)\r\n                    setIsLoading(false);\r\n                } else if (response.status === 404) {\r\n                    handleLoginRedirect();\r\n                } else {\r\n                    console.error(\"Error fetching cart items:\", response.statusText);\r\n                    setIsLoading(false);\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Error fetching cart items:\", error);\r\n                setIsLoading(false);\r\n            }\r\n        }\r\n    };\r\n\r\n    function handleLoginRedirect () {\r\n        window.alert(\"Please Login First\");\r\n        navigate(\"/main\");\r\n    }\r\n\r\n    const handleDeleteItem = (deletedItemId) => {\r\n        toast.success(\"Item deleted from your cart\", {\r\n                position: \"top-center\",\r\n                draggable: true,\r\n                hideProgressBar: true\r\n            }\r\n        )\r\n        setCartItems(prevCartItems => prevCartItems.filter(item => item.cartItemId !== deletedItemId));\r\n    }\r\n\r\n    const handleQuantityChange = (cartItemId, newQuantity) => {\r\n        setCartItems(prevCartItems =>\r\n            prevCartItems.map(item =>\r\n                item.cartItemId === cartItemId ? { ...item, quantity: newQuantity } : item\r\n            )\r\n        );\r\n    };\r\n\r\n    useEffect(() => {\r\n        const newSubTotal = cartItems.reduce(\r\n            (total, cartItem) => total + cartItem.price * cartItem.quantity, 0\r\n        );\r\n        setSubTotal(newSubTotal);\r\n    }, [cartItems]);\r\n\r\n    return(\r\n        <>\r\n            <Header/>\r\n            <div className=\"cart row\">\r\n                <div className=\"cart-container col-7\">\r\n                    <div className=\"cart-title-container\">\r\n                        <h3 className=\"cart-title\">Your Items</h3>\r\n                    </div>\r\n                    <ul className=\"product-list\">\r\n                        <li className=\"product\">\r\n                            <div className=\"shopping-card\">\r\n                                {isLoading ? (\r\n                                    <div className=\"spinner-border\" role=\"status\">\r\n                                        <span className=\"visually-hidden\">Loading...</span>\r\n                                    </div>\r\n                                ) : cartItems.length === 0 ? (\r\n                                    <>\r\n                                        <p>There are no items in your cart.</p>\r\n                                        <img src={Cart} alt=\"shopping cart\" className=\"shopping-cart-icon\"/>\r\n                                    </>\r\n                                ) :(\r\n                                    cartItems && cartItems.map((cartItem, index) => (\r\n                                        <CartItem\r\n                                            key={index}\r\n                                            cartId={cartId}\r\n                                            cartItemId={cartItem.cartItemId}\r\n                                            images={cartItem.images}\r\n                                            productName={cartItem.productName}\r\n                                            brand={cartItem.brand}\r\n                                            price={cartItem.price}\r\n                                            photos={cartItem.photos}\r\n                                            quantity={cartItem.quantity}\r\n                                            onDelete={handleDeleteItem}\r\n                                            onQuantityChange={handleQuantityChange}\r\n                                        />\r\n                                    ))\r\n                                )}\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                <div className=\"total-container col-2\">\r\n                    <div className=\"price-container\">\r\n                        <h4 className=\"total-txt\">Subtotal:</h4>\r\n                        <h4 className=\"total-amount\">${subTotal.toFixed(2)}</h4>\r\n                    </div>\r\n                    <div className=\"proceed-container\">\r\n                        <button className=\"btn btn-primary proceed-btn\">\r\n                            Proceed to Checkout\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </>\r\n    )\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}